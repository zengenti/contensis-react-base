{"version":3,"file":"ToJs-55a7536c.js","sources":["../src/user/redux/selectors.ts","../src/user/util/matchGroups.ts","../src/util/ToJs.tsx"],"sourcesContent":["import { StateType } from '~/config';\r\nimport { AppState } from '~/redux/appstate';\r\nimport { getImmutableOrJS as getIn } from '~/redux/util';\r\n\r\nexport const selectUserIsLoading = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'isLoading']);\r\n\r\nexport const selectUserIsAuthenticated = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'isAuthenticated']);\r\n\r\nexport const selectUserIsAuthenticationError = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'isAuthenticationError']);\r\n\r\nexport const selectUserIsError = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'isError']);\r\n\r\n/**\r\n * DEPRECATED 12/2021 - use selectUserErrorMessage instead\r\n * @param state AppState\r\n * @returns string\r\n */\r\nexport const selectUserAuthenticationErrorMessage = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'errorMessage']);\r\n\r\nexport const selectUserErrorMessage = (state: AppState) =>\r\n  getIn(state, ['user', 'authenticationState', 'errorMessage']);\r\n\r\nexport const selectClientCredentials = (\r\n  state: AppState,\r\n  returnType?: StateType\r\n) =>\r\n  getIn(\r\n    state,\r\n    ['user', 'authenticationState', 'clientCredentials'],\r\n    {},\r\n    returnType\r\n  );\r\n\r\nexport const selectUser = (state: AppState, returnType?: StateType) =>\r\n  getIn(state, 'user', {}, returnType);\r\n\r\nexport const selectUserIsZengentiStaff = (state: AppState) =>\r\n  getIn(state, ['user', 'isZengentiStaff']);\r\n\r\nexport const selectUserGuid = (state: AppState) => getIn(state, ['user', 'id']);\r\n\r\nexport const selectUsername = (state: AppState) =>\r\n  getIn(state, ['user', 'username']);\r\n\r\nexport const selectUserEmail = (state: AppState) =>\r\n  getIn(state, ['user', 'email']);\r\n\r\nexport const selectUserGroups = (state: AppState, returnType?: StateType) =>\r\n  getIn(state, ['user', 'groups'], [], returnType);\r\n\r\nexport const selectUserSecurityToken = (state: AppState) =>\r\n  getIn(state, [\r\n    'user',\r\n    'authenticationState',\r\n    'clientCredentials',\r\n    'contensisClassicToken',\r\n  ]);\r\n\r\nexport const selectUserRegistration = (\r\n  state: AppState,\r\n  returnType?: StateType\r\n) => getIn(state, ['user', 'registration'], {}, returnType);\r\n\r\nexport const selectUserRegistrationError = (state: AppState) =>\r\n  getIn(state, ['user', 'registration', 'error'], false);\r\n\r\nexport const selectUserRegistrationIsLoading = (state: AppState) =>\r\n  getIn(state, ['user', 'registration', 'isLoading'], false);\r\n\r\nexport const selectUserRegistrationIsSuccess = (state: AppState) =>\r\n  getIn(state, ['user', 'registration', 'success'], false);\r\n\r\nexport const selectPasswordResetRequestSending = (state: AppState) =>\r\n  getIn(state, ['user', 'passwordResetRequest', 'isSending']);\r\n\r\nexport const selectPasswordResetRequestSent = (state: AppState) =>\r\n  getIn(state, ['user', 'passwordResetRequest', 'sent']);\r\n\r\nexport const selectPasswordResetRequestError = (state: AppState) =>\r\n  getIn(state, ['user', 'passwordResetRequest', 'error']);\r\n\r\nexport const selectResetPasswordSending = (state: AppState) =>\r\n  getIn(state, ['user', 'resetPassword', 'isSending']);\r\n\r\nexport const selectResetPasswordSent = (state: AppState) =>\r\n  getIn(state, ['user', 'resetPassword', 'sent']);\r\n\r\nexport const selectResetPasswordError = (state: AppState) =>\r\n  getIn(state, ['user', 'resetPassword', 'error']);\r\n\r\nexport const selectChangePasswordSending = (state: AppState) =>\r\n  getIn(state, ['user', 'changePassword', 'isSending']);\r\n\r\nexport const selectChangePasswordSent = (state: AppState) =>\r\n  getIn(state, ['user', 'changePassword', 'sent']);\r\n\r\nexport const selectChangePasswordError = (state: AppState) =>\r\n  getIn(state, ['user', 'changePassword', 'error']);\r\n","import { Group } from 'contensis-management-api/lib/models';\r\nimport { RequireLogin } from '~/routing/routes';\r\n\r\nexport const matchUserGroup = (\r\n  userGroups: Group[] = [],\r\n  requiredGroups: RequireLogin = []\r\n) => {\r\n  if (\r\n    !Array.isArray(requiredGroups) ||\r\n    (Array.isArray(requiredGroups) && requiredGroups.length === 0)\r\n  )\r\n    return true;\r\n\r\n  const groupMatch = requiredGroups.some(requiredGroup => {\r\n    return userGroups.some(userGroup => {\r\n      if (requiredGroup.id === userGroup.id) {\r\n        return true;\r\n      }\r\n      if (requiredGroup.name === userGroup.name) {\r\n        return true;\r\n      }\r\n    });\r\n  });\r\n  return groupMatch;\r\n};\r\n","/* eslint-disable react/display-name */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport React from 'react';\r\n\r\nexport const toJS =\r\n  <Props extends { [key: string]: any }>(\r\n    WrappedComponent: React.ComponentType<Props>\r\n  ): React.ComponentType<Props> =>\r\n  (wrappedComponentProps: Props) => {\r\n    const KEY = 0;\r\n    const VALUE = 1;\r\n\r\n    const propsJS = Object.entries(wrappedComponentProps).reduce<Props>(\r\n      (newProps: any, wrappedComponentProp) => {\r\n        const propKey = wrappedComponentProp[KEY];\r\n        const propValue = wrappedComponentProp[VALUE];\r\n        newProps[propKey] =\r\n          propValue && typeof propValue === 'object' && 'toJS' in propValue\r\n            ? propValue.toJS()\r\n            : propValue;\r\n        return newProps as Props;\r\n      },\r\n      {} as Props\r\n    );\r\n\r\n    return <WrappedComponent {...propsJS} />;\r\n  };\r\n"],"names":["selectUserIsLoading","state","getIn","selectUserIsAuthenticated","selectUserIsAuthenticationError","selectUserIsError","selectUserAuthenticationErrorMessage","selectUserErrorMessage","selectClientCredentials","returnType","selectUser","selectUserIsZengentiStaff","selectUserGuid","selectUsername","selectUserEmail","selectUserGroups","selectUserSecurityToken","selectUserRegistration","selectUserRegistrationError","selectUserRegistrationIsLoading","selectUserRegistrationIsSuccess","selectPasswordResetRequestSending","selectPasswordResetRequestSent","selectPasswordResetRequestError","selectResetPasswordSending","selectResetPasswordSent","selectResetPasswordError","selectChangePasswordSending","selectChangePasswordSent","selectChangePasswordError","matchUserGroup","userGroups","requiredGroups","Array","isArray","length","groupMatch","some","requiredGroup","userGroup","id","name","toJS","WrappedComponent","wrappedComponentProps","KEY","VALUE","propsJS","Object","entries","reduce","newProps","wrappedComponentProp","propKey","propValue","React"],"mappings":"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"}