{"version":3,"file":"App-83107d7e.js","sources":["../src/redux/store/history.js","../src/redux/sagas/navigation.js","../src/util/schema.ts","../src/routing/util/expressions.ts","../src/routing/util/queries.ts","../src/routing/redux/sagas.js","../src/user/redux/sagas/register.js","../src/user/util/userHelper.js","../src/user/redux/sagas/resetPassword.js","../src/user/redux/sagas/index.js","../src/redux/sagas/index.js","../src/util/pickProject.js","../src/app/App.tsx"],"sourcesContent":["import { createBrowserHistory, createMemoryHistory } from 'history';\n\n// Create a history depending on the environment\nconst selectedHistory =\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\n\nexport const history = (options = {}) => selectedHistory(options);\nexport const browserHistory = selectedHistory();\n","import { takeEvery, put, select } from 'redux-saga/effects';\nimport * as log from 'loglevel';\n\nimport { deliveryApi } from '~/util/ContensisDeliveryApi';\nimport {\n  GET_NODE_TREE,\n  SET_NODE_TREE,\n  GET_NODE_TREE_ERROR,\n} from '~/redux/types/navigation';\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\nimport { selectVersionStatus } from '~/redux/selectors/version';\nimport { selectCurrentProject } from '~/routing/redux/selectors';\n\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\n\nexport function* ensureNodeTreeSaga(action) {\n  const state = yield select();\n  try {\n    if (!hasNavigationTree(state)) {\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\n      const project = yield select(selectCurrentProject);\n      const nodes = yield deliveryApi\n        .getClient(deliveryApiVersionStatus, project)\n        .nodes.getRoot({\n          depth: action.treeDepth || 0,\n          language: action.language,\n        });\n      if (nodes) {\n        yield put({ type: SET_NODE_TREE, nodes });\n      } else {\n        yield put({ type: GET_NODE_TREE_ERROR });\n      }\n    }\n  } catch (ex) {\n    log.error(...['Error running ensureNodeTreeSaga:', ex]);\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\n  }\n}\n","export const DataFormats = {\n  entry: 'entry',\n  webpage: 'webpage',\n};\n\nconst sys = {\n  contentTypeId: 'sys.contentTypeId',\n  dataFormat: 'sys.dataFormat',\n  filename: 'sys.properties.filename',\n  id: 'sys.id',\n  includeInSearch: 'sys.metadata.includeInSearch',\n  slug: 'sys.slug',\n  uri: 'sys.uri',\n  versionStatus: 'sys.versionStatus',\n};\n\nexport const Fields = {\n  entryTitle: 'entryTitle',\n  entryDescription: 'entryDescription',\n  keywords: 'keywords',\n  sys,\n  contentTypeId: 'sys.contentTypeId',\n  wildcard: '*',\n};\n\nexport const VersionStatus = {\n  published: 'published',\n  latest: 'latest',\n};\n","import { IExpression } from 'contensis-core-api';\nimport { Op } from 'contensis-delivery-api';\nimport { Fields } from '~/util/schema';\n\nexport const fieldExpression = (\n  field: string,\n  value: string | string[],\n  operator = 'equalTo',\n  weight = null\n) => {\n  if (!field || !value) return [];\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\n  else\n    return !weight\n      ? [Op[operator](field, value)]\n      : [Op[operator](field, value).weight(weight)];\n};\n\nexport const defaultExpressions = (\n  versionStatus: 'published' | 'latest'\n): IExpression[] => {\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\n};\n\nconst equalToOrIn = (field: string, arr: string[], operator = 'equalTo') =>\n  arr.length === 0\n    ? []\n    : arr.length === 1\n    ? [Op[operator](field, arr[0])]\n    : [Op.in(field, ...arr)];\n","import { VersionStatus } from 'contensis-core-api';\nimport { Query } from 'contensis-delivery-api';\nimport { fieldExpression, defaultExpressions } from './expressions';\n\nexport const routeEntryByFieldsQuery = (\n  id: string,\n  language = 'en-GB',\n  fields: string[] = [],\n  versionStatus: VersionStatus = 'published'\n) => {\n  const query = new Query(\n    ...[\n      ...fieldExpression('sys.id', id),\n      ...fieldExpression('sys.language', language),\n      ...defaultExpressions(versionStatus),\n    ]\n  );\n  query.fields = fields;\n  return query;\n};\n","import to from 'await-to-js';\nimport * as log from 'loglevel';\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\n\nimport {\n  SET_ENTRY,\n  SET_ANCESTORS,\n  SET_NAVIGATION_PATH,\n  SET_ROUTE,\n  SET_SIBLINGS,\n  UPDATE_LOADING_STATE,\n} from './types';\nimport { GET_NODE_TREE } from '~/redux/types/navigation';\nimport {\n  selectCurrentAncestors,\n  selectCurrentNode,\n  selectCurrentProject,\n  selectCurrentSiblings,\n  selectMappedEntry,\n  selectRouteEntry,\n  selectRouteEntryEntryId,\n  selectRouteEntryLanguage,\n} from './selectors';\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\nimport { selectVersionStatus } from '~/redux/selectors/version';\nimport { handleRequiresLoginSaga } from '~/user/redux/sagas/login';\nimport { ensureNodeTreeSaga } from '~/redux/sagas/navigation';\nimport { injectRedux as reduxInjector } from '~/redux/store/injectors';\n\nimport { LoginHelper } from '~/user';\nimport { findContentTypeMapping } from '../util/find-contenttype-mapping';\nimport { routeEntryByFieldsQuery } from '../util/queries';\nimport { cachedSearchWithCookies } from '~/util/ContensisDeliveryApi';\n\nexport const routingSagas = [\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\n  takeEvery(SET_ROUTE, setRouteSaga),\n];\n\n/**\n * To navigate / push a specific route via redux middleware\n * @param {path, state} action\n */\nfunction* setRouteSaga(action) {\n  yield put({\n    type: 'CALL_HISTORY_METHOD',\n    payload: {\n      method: 'push',\n      args: [action.path, action.state],\n    },\n  });\n}\n\nfunction* getRouteSaga(action) {\n  let entry = null;\n  try {\n    const {\n      withEvents,\n      routes: { ContentTypeMappings = {} } = {},\n      staticRoute,\n      cookies,\n    } = action;\n    const api = cachedSearchWithCookies(cookies.raw);\n\n    // Inject redux { key, reducer, saga } provided by staticRoute\n    if (staticRoute && staticRoute.route.injectRedux)\n      yield call(reduxInjectorSaga, staticRoute.route.injectRedux);\n\n    // Variables we will pass to setRouteEntry\n    let pathNode = null,\n      ancestors = null,\n      children = [],\n      siblings = null;\n\n    let contentTypeMapping = {};\n\n    // These variables are the return values from\n    // calls to withEvents.onRouteLoad and onRouteLoaded\n    let appsays,\n      requireLogin = false;\n\n    if (withEvents && withEvents.onRouteLoad) {\n      appsays = yield withEvents.onRouteLoad(action);\n    }\n\n    const staticRouteLinkDepth = staticRoute?.route?.params?.linkDepth;\n    const staticRouteFields = staticRoute?.route?.params?.fields;\n    const entryLinkDepth =\n      appsays && appsays.entryLinkDepth !== undefined\n        ? appsays.entryLinkDepth\n        : 2;\n    const setContentTypeLimits =\n      (typeof staticRouteLinkDepth === 'undefined' || !staticRouteFields) &&\n      !!ContentTypeMappings.find(\n        ct => ct.fields || ct.linkDepth || ct.nodeOptions\n      );\n\n    const state = yield select();\n    const routeEntry = selectRouteEntry(state, 'js');\n    const routeNode = selectCurrentNode(state, 'js');\n    const currentPath = action.path; //selectCurrentPath(state);\n    const deliveryApiStatus = selectVersionStatus(state);\n    const project = selectCurrentProject(state);\n    // const isHome = currentPath === '/';\n    const isPreview = currentPath && currentPath.startsWith('/preview/');\n    const defaultLang = (appsays && appsays.defaultLang) || 'en-GB';\n\n    if (\n      !isPreview &&\n      ((appsays && appsays.customRouting) ||\n        (staticRoute && !staticRoute.route.fetchNode) ||\n        (routeEntry &&\n          action.statePath === action.path &&\n          (appsays && appsays.refetchNode) !== true))\n    ) {\n      // To prevent erroneous 404s and wasted network calls, this covers\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\n      // - standard Contensis SiteView Routing where we already have that entry in state\n      if (\n        routeEntry &&\n        (!staticRoute || (staticRoute.route && staticRoute.route.fetchNode))\n      ) {\n        pathNode = { ...routeNode, entry: null };\n        pathNode.entry = entry = routeEntry;\n        //Do nothing, the entry is allready the right one.\n        // yield put({\n        //   type: SET_ENTRY,\n        //   entry,\n        //   node: routeNode,\n        //   isLoading: false,\n        // });\n        yield put({\n          type: UPDATE_LOADING_STATE,\n          isLoading: false,\n        });\n      } else\n        yield call(\n          setRouteEntry,\n          currentPath,\n          routeEntry,\n          yield select(selectCurrentNode),\n          yield select(selectCurrentAncestors),\n          yield select(selectCurrentSiblings)\n        );\n    } else {\n      // Handle preview routes\n      if (isPreview) {\n        let splitPath = currentPath.split('/');\n        let entryGuid = splitPath[2];\n        let language = defaultLang;\n        if (splitPath.length >= 3) {\n          //set lang key if available in the path, else use default lang\n          //assumes preview url on content type is: http://preview.ALIAS.contensis.cloud/preview/{GUID}/{LANG}\n          if (splitPath.length == 4) language = splitPath[3];\n          // According to product dev we cannot use Node API\n          // for previewing entries as it gives a response of []\n          // -- apparently it is not correct to request latest content\n          // with Node API\n\n          let previewEntry = yield api\n            .getClient(deliveryApiStatus, project)\n            .entries.get({\n              id: entryGuid,\n              language,\n              linkDepth: entryLinkDepth,\n            });\n          if (previewEntry) {\n            pathNode = { entry: previewEntry };\n            ({ entry } = pathNode || {});\n          }\n        }\n      } else {\n        // Handle all other routes\n        let nodeError = undefined;\n        [nodeError, pathNode] = yield to(\n          api.getNode(\n            {\n              depth: 0,\n              path: currentPath,\n              entryFields: setContentTypeLimits\n                ? ['sys.contentTypeId', 'sys.id']\n                : staticRouteFields || '*',\n              entryLinkDepth: setContentTypeLimits\n                ? 0\n                : typeof staticRouteLinkDepth !== 'undefined'\n                ? staticRouteLinkDepth\n                : entryLinkDepth,\n              language: defaultLang,\n              versionStatus: deliveryApiStatus,\n            },\n            project\n          )\n        );\n        if (nodeError) {\n          if ([401, 403].includes(nodeError.status)) {\n            // Capture specific auth errors with the delivery api\n            // and fire the user down the handleRequiresLoginSaga\n            // If auth was successful via a refreshToken we need to reload the page\n            // to run this getRouteSaga again with the security token cookie\n            const userLoggedIn = yield call(handleRequiresLoginSaga, {\n              ...action,\n              requireLogin: true,\n            });\n            if (userLoggedIn && nodeError.status === 401) {\n              // Reload the route so we can re-run the routing request now the\n              // authentication cookies are written\n              return yield call(setRouteSaga, { path: currentPath });\n            } else if (userLoggedIn && nodeError.status === 403) {\n              return yield call(setRouteSaga, {\n                path: LoginHelper.GetAccessDeniedRoute(currentPath),\n              });\n            } else {\n              return yield call(do500, nodeError);\n            }\n          } else throw nodeError;\n        } else ({ entry } = pathNode || {});\n\n        if (setContentTypeLimits && pathNode?.entry?.sys?.id) {\n          // Get fields[] and linkDepth from ContentTypeMapping to get the entry data\n          // and current node's ordinates at a specified depth with specified fields\n          contentTypeMapping =\n            findContentTypeMapping(\n              ContentTypeMappings,\n              pathNode.entry.sys.contentTypeId\n            ) || {};\n          const { fields, linkDepth } = contentTypeMapping;\n          const query = routeEntryByFieldsQuery(\n            pathNode.entry.sys.id,\n            pathNode.entry.sys.language,\n            fields,\n            deliveryApiStatus\n          );\n          const payload = yield api.search(\n            query,\n            typeof linkDepth !== 'undefined' ? linkDepth : entryLinkDepth || 0,\n            project\n          );\n          if (payload?.items?.length > 0) {\n            pathNode.entry = entry = payload.items[0];\n          }\n        }\n      }\n\n      // make calls to fetch node ancestors, children,\n      // siblings or entire node tree\n      [ancestors, children, siblings] = yield call(\n        resolveCurrentNodeOrdinates,\n        {\n          api,\n          appsays,\n          contentTypeMapping,\n          language: defaultLang,\n          path: currentPath,\n          pathNode,\n          project,\n          versionStatus: deliveryApiStatus,\n        }\n      );\n\n      if (children) pathNode.children = children;\n    }\n\n    const resolvedContentTypeMapping =\n      findContentTypeMapping(\n        ContentTypeMappings,\n        pathNode?.entry?.sys?.contentTypeId\n      ) || {};\n\n    // Inject redux { key, reducer, saga } provided by ContentTypeMapping\n    if (resolvedContentTypeMapping.injectRedux)\n      yield call(reduxInjectorSaga, resolvedContentTypeMapping.injectRedux);\n\n    if (withEvents && withEvents.onRouteLoaded) {\n      // Check if the app has provided a requireLogin boolean flag or groups array\n      // in addition to checking if requireLogin is set in the route definition\n      ({ requireLogin } =\n        (yield withEvents.onRouteLoaded({ ...action, entry })) || {});\n    }\n\n    if (requireLogin !== false) {\n      // Do not call the login feature saga if requireLogin is false\n      yield call(handleRequiresLoginSaga, {\n        ...action,\n        entry,\n        requireLogin,\n      });\n    }\n\n    if (!appsays || !appsays.preventScrollTop) {\n      // Scroll into View\n      if (typeof window !== 'undefined') window.scrollTo(0, 0);\n    }\n\n    if (pathNode?.entry?.sys?.id) {\n      entry = pathNode.entry;\n\n      yield call(\n        setRouteEntry,\n        currentPath,\n        entry,\n        pathNode,\n        ancestors,\n        siblings,\n        staticRoute?.route?.fetchNode?.entryMapper ||\n          resolvedContentTypeMapping.entryMapper,\n        false,\n        appsays?.refetchNode\n      );\n    } else {\n      if (staticRoute)\n        yield call(\n          setRouteEntry,\n          currentPath,\n          null,\n          pathNode,\n          ancestors,\n          siblings\n        );\n      else yield call(do404);\n    }\n  } catch (e) {\n    log.error(...['Error running route saga:', e, e.stack]);\n    yield call(do500, e);\n  }\n}\n\nfunction* resolveCurrentNodeOrdinates({\n  api,\n  appsays,\n  contentTypeMapping,\n  language,\n  path,\n  pathNode,\n  project,\n  versionStatus,\n}) {\n  const apiCall = [() => null, () => null, () => null, () => null];\n\n  // if appsays customNavigation: true, we will set doNavigation to false\n  // if appsays customNavigation: { ... }, we will set doNavigation to the customNavigation object and check for child elements\n  // if appsays nothing we will set doNavigation to true and continue to do navigation calls\n  const doNavigation =\n    !appsays ||\n    (appsays?.customNavigation === true\n      ? false\n      : appsays?.customNavigation || true);\n\n  const {\n    entryLinkDepth = 0,\n    fields,\n    linkDepth,\n    nodeOptions = {},\n  } = contentTypeMapping;\n\n  if (pathNode && pathNode.id) {\n    if (doNavigation === true || doNavigation.ancestors) {\n      apiCall[0] = function* getAncestors() {\n        try {\n          return yield api.getAncestors(\n            {\n              id: pathNode.id,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching ancestors', ex);\n          return [];\n        }\n      };\n    }\n\n    const childrenDepth =\n      doNavigation === true || doNavigation.children === true\n        ? 1\n        : (doNavigation && doNavigation.children) || 0;\n\n    if (\n      (typeof nodeOptions?.children === 'undefined' && childrenDepth > 0) ||\n      nodeOptions.children\n    ) {\n      const childrenOptions =\n        typeof nodeOptions.children === 'boolean' ? {} : nodeOptions.children;\n      apiCall[1] = function* getChildren() {\n        try {\n          return yield api.getNode(\n            {\n              depth:\n                childrenOptions.depth !== undefined\n                  ? childrenOptions.depth\n                  : childrenDepth,\n              path,\n              entryFields: childrenOptions.fields || fields || undefined,\n              entryLinkDepth:\n                typeof childrenOptions.linkDepth !== 'undefined'\n                  ? childrenOptions.linkDepth\n                  : typeof linkDepth !== 'undefined'\n                  ? linkDepth\n                  : entryLinkDepth,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching children', ex);\n          return [];\n        }\n      };\n    }\n\n    if (\n      (typeof nodeOptions?.siblings === 'undefined' && doNavigation.siblings) ||\n      nodeOptions.siblings\n    ) {\n      apiCall[2] = function* getSiblings() {\n        try {\n          return yield api.getSiblings(\n            {\n              id: pathNode.id,\n              entryFields: nodeOptions?.siblings?.fields || fields || undefined,\n              entryLinkDepth:\n                typeof nodeOptions?.siblings?.linkDepth !== 'undefined'\n                  ? nodeOptions.siblings.linkDepth\n                  : typeof linkDepth !== 'undefined'\n                  ? linkDepth\n                  : entryLinkDepth,\n              includeInMenu: true,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching siblings', ex);\n          return [];\n        }\n      };\n    }\n  }\n\n  const isTreeLoaded = yield select(hasNavigationTree);\n  if (!isTreeLoaded && (doNavigation === true || doNavigation.tree))\n    apiCall[3] = function* getNodeTree() {\n      const treeDepth =\n        doNavigation === true ||\n        !doNavigation.tree ||\n        doNavigation.tree === true\n          ? 2\n          : doNavigation.tree;\n\n      if (typeof window !== 'undefined') {\n        return yield put({\n          type: GET_NODE_TREE,\n          language,\n          treeDepth,\n        });\n      } else {\n        return yield call(ensureNodeTreeSaga, {\n          language,\n          treeDepth,\n        });\n      }\n    };\n\n  const [loadAncestors, loadChildren, loadSiblings, loadTree] = apiCall;\n  const [ancestors, nodeWithChildren, siblings] = yield all([\n    loadAncestors(),\n    loadChildren(),\n    loadSiblings(),\n    loadTree(),\n  ]);\n  return [ancestors, nodeWithChildren?.children, siblings];\n}\n\nfunction* setRouteEntry(\n  currentPath,\n  entry,\n  node,\n  ancestors,\n  siblings,\n  entryMapper,\n  notFound = false,\n  remapEntry = false\n) {\n  const entrySys = (entry && entry.sys) || {};\n\n  // Update a window global to provide the preview toolbar\n  // an updated entry id in client-side navigation\n  if (typeof window !== 'undefined') window.ContensisEntryId = entrySys.id;\n\n  const currentEntryId = yield select(selectRouteEntryEntryId);\n  const currentEntryLang = yield select(selectRouteEntryLanguage);\n  const mappedEntry =\n    currentEntryId === entrySys.id &&\n    currentEntryLang === entrySys.language &&\n    remapEntry === false\n      ? (yield select(selectMappedEntry, 'js')) || {}\n      : yield mapRouteEntry(entryMapper, {\n          ...node,\n          entry,\n          ancestors,\n          siblings,\n        });\n\n  yield all([\n    put({\n      type: SET_ENTRY,\n      id: entrySys.id,\n      currentPath,\n      entry,\n      mappedEntry,\n      node,\n      notFound,\n    }),\n    ancestors &&\n      put({\n        type: SET_ANCESTORS,\n        ancestors,\n      }),\n    siblings &&\n      put({\n        type: SET_SIBLINGS,\n        siblings,\n      }),\n  ]);\n}\n\nfunction* mapRouteEntry(entryMapper, node) {\n  try {\n    if (typeof entryMapper === 'function') {\n      const state = yield select();\n      const mappedEntry = yield call(entryMapper, node, state);\n      return mappedEntry;\n    }\n  } catch (e) {\n    log.error(...['Error running entryMapper:', e, e.stack]);\n  }\n  return;\n}\n\nfunction* do404() {\n  yield call(clientReloadHitServer);\n  yield put({\n    type: SET_ENTRY,\n    id: null,\n    entry: null,\n    notFound: true,\n  });\n}\n\nfunction* clientReloadHitServer() {\n  const stateEntry = yield select(selectRouteEntry);\n\n  // If in client and there is a stateEntry.sys field reload the page,\n  // on the 2nd load stateEntry.sys should be null at this point,\n  // we do not wish to reload again and get stuck in an infinite reloading loop\n  if (typeof window !== 'undefined' && (stateEntry?.sys || null)) {\n    window.location.reload();\n  }\n}\n\nfunction* do500(error) {\n  yield put({\n    type: SET_ENTRY,\n    id: null,\n    entry: null,\n    notFound: true,\n    isError: true,\n    error,\n    statusCode: error && error.status ? error.status : 500,\n  });\n}\n\nfunction* reduxInjectorSaga(injectorFn) {\n  if (typeof injectorFn === 'function') {\n    const { key, reducer, saga } = yield injectorFn();\n    reduxInjector({ key, reducer, saga });\n  }\n}\n","import { to } from 'await-to-js';\nimport { put, select, takeEvery } from 'redux-saga/effects';\nimport { setRoute } from '~/routing/redux/actions';\nimport { selectCurrentSearch } from '~/routing/redux/selectors';\nimport { queryParams } from '~/util/navigation';\nimport {\n  REGISTER_USER,\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_FAILED,\n} from '../types';\n\nexport const registerSagas = [\n  takeEvery(REGISTER_USER, registerSaga),\n  takeEvery(REGISTER_USER_SUCCESS, redirectSaga),\n];\n\nfunction* registerSaga({ user, mappers }) {\n  let requestBody = user;\n  // Allow use of request mapper to take a user object\n  // of any format and return the payload for the api request\n  if (mappers && mappers.request && typeof mappers.request === 'function') {\n    requestBody = yield mappers.request(user);\n  }\n\n  // Make POST call to register API\n  const response = yield fetch('/account/register', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(requestBody),\n  });\n\n  if (response.ok) {\n    let mappedResponse;\n    const [, responseBody] = yield to(response.json());\n    if (responseBody) {\n      // Allow use of response mapper to convert the successful user object\n      // from the api response body into a user object of any format\n      if (\n        mappers &&\n        mappers.response &&\n        typeof mappers.response === 'function'\n      ) {\n        mappedResponse = yield mappers.response(responseBody);\n      }\n      // Update user object with mappedResponse or responseBody\n      yield put({\n        type: REGISTER_USER_SUCCESS,\n        user: mappedResponse || responseBody,\n      });\n    } else {\n      // OK response but unable to parse the response body\n      yield put({\n        type: REGISTER_USER_FAILED,\n        error: {\n          message:\n            'Unable to parse the created user from the register service response',\n        },\n      });\n    }\n  } else {\n    // Not OK responses, these can be due to service availability\n    // or status codes echoed from the responses received from\n    // management api when registering the user\n    const [, errorResponse] = yield to(response.json());\n    const error = (errorResponse && errorResponse.error) || errorResponse || {};\n    // Get something meaningful from the response if there is no message in the body\n    if (!error.message) {\n      error.message = `Registration service: ${response.statusText}`;\n      error.status = response.status;\n    }\n    yield put({\n      type: REGISTER_USER_FAILED,\n      error,\n    });\n  }\n}\n\nfunction* redirectSaga() {\n  // Check if querystring contains a redirect_uri\n  const currentQs = queryParams(yield select(selectCurrentSearch));\n  const redirectUri = currentQs.redirect_uri || currentQs.redirect;\n\n  // We must use redux based navigation to preserve the registration state\n  if (redirectUri) yield put(setRoute(redirectUri));\n}\n","const PAP_URL = 'https://pap.zengenti.com';\n\nconst USER_ENVS_URI = 'my-environments';\nconst USER_RESEND_VERIFICATION_URI = 'account/verify/resend';\nconst USER_REQUEST_PASSWORD_RESET_URI = 'account/reset';\nconst USER_RESET_PASSWORD_URI = 'account/reset/password';\n\nconst USER_ENVS_URL = `${PAP_URL}/${USER_ENVS_URI}`;\n\nconst BASE_OPTIONS = {\n  method: 'GET',\n  headers: { 'Content-Type': 'application/json' },\n};\n\nexport class UserHelper {\n  static async GetUsersEnvironments(securityToken) {\n    const options = {\n      ...BASE_OPTIONS,\n      headers: {\n        'x-security-token': securityToken,\n      },\n    };\n    return await UserHelper.get(USER_ENVS_URL, options);\n  }\n  static async ResendUserVerification(userEmail) {\n    const options = {\n      ...BASE_OPTIONS,\n    };\n    return await UserHelper.get(\n      `/${USER_RESEND_VERIFICATION_URI}?user=${userEmail}`,\n      options\n    );\n  }\n  static async RequestPasswordReset(userEmailObject) {\n    const options = {\n      ...BASE_OPTIONS,\n      body: JSON.stringify(userEmailObject),\n    };\n    options.method = 'POST';\n\n    return await UserHelper.get(`/${USER_REQUEST_PASSWORD_RESET_URI}`, options);\n  }\n  static async ResetPassword(resetPasswordObject) {\n    const options = {\n      ...BASE_OPTIONS,\n      body: JSON.stringify(resetPasswordObject),\n    };\n    options.method = 'POST';\n\n    return await UserHelper.get(`/${USER_RESET_PASSWORD_URI}`, options);\n  }\n\n  static async get(url, options = BASE_OPTIONS) {\n    try {\n      const responseBody = await api(url, options);\n      return responseBody;\n    } catch (err) {\n      return { error: { message: err.message } };\n    }\n  }\n}\n\nasync function api(url, options) {\n  return fetch(url, options)\n    .then(async response => {\n      return response.json().then(data => data);\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n","import { put, takeEvery, select } from 'redux-saga/effects';\nimport { to } from 'await-to-js';\nimport { getManagementApiClient } from '~/user/util/ContensisManagementApi';\nimport { UserHelper } from '~/user/util/userHelper';\nimport { selectClientCredentials } from '../selectors';\nimport {\n  REQUEST_USER_PASSWORD_RESET,\n  RESET_USER_PASSWORD,\n  REQUEST_USER_PASSWORD_RESET_ERROR,\n  REQUEST_USER_PASSWORD_RESET_SENDING,\n  REQUEST_USER_PASSWORD_RESET_SUCCESS,\n  RESET_USER_PASSWORD_ERROR,\n  RESET_USER_PASSWORD_SENDING,\n  RESET_USER_PASSWORD_SUCCESS,\n  CHANGE_USER_PASSWORD,\n  CHANGE_USER_PASSWORD_SENDING,\n  CHANGE_USER_PASSWORD_SUCCESS,\n  CHANGE_USER_PASSWORD_ERROR,\n} from '../types';\n\nexport const resetPasswordSagas = [\n  takeEvery(REQUEST_USER_PASSWORD_RESET, requestPasswordResetSaga),\n  takeEvery(RESET_USER_PASSWORD, resetPasswordSaga),\n  takeEvery(CHANGE_USER_PASSWORD, changePasswordSaga),\n];\n\nfunction* requestPasswordResetSaga(action) {\n  const userEmailObject = action.userEmailObject;\n  yield put({\n    type: REQUEST_USER_PASSWORD_RESET_SENDING,\n  });\n  if (userEmailObject && userEmailObject.userEmail) {\n    try {\n      const passwordResetRequestResponse =\n        yield UserHelper.RequestPasswordReset(userEmailObject);\n\n      if (passwordResetRequestResponse) {\n        if (!passwordResetRequestResponse.error) {\n          yield put({\n            type: REQUEST_USER_PASSWORD_RESET_SUCCESS,\n          });\n        } else {\n          yield put({\n            type: REQUEST_USER_PASSWORD_RESET_ERROR,\n            error: passwordResetRequestResponse.error.message,\n          });\n        }\n      } else {\n        yield put({\n          type: REQUEST_USER_PASSWORD_RESET_ERROR,\n          error: 'No response from server',\n        });\n      }\n    } catch (error) {\n      yield put({\n        type: REQUEST_USER_PASSWORD_RESET_ERROR,\n        error: error && error.toString(),\n      });\n    }\n  } else {\n    yield put({\n      type: REQUEST_USER_PASSWORD_RESET_ERROR,\n      error: 'Invalid object',\n    });\n  }\n}\n\nfunction* resetPasswordSaga(action) {\n  const resetPasswordObject = action.resetPasswordObject;\n\n  yield put({\n    type: RESET_USER_PASSWORD_SENDING,\n  });\n  if (resetPasswordObject.token && resetPasswordObject.password) {\n    try {\n      const resetPasswordResponse = yield UserHelper.ResetPassword(\n        resetPasswordObject\n      );\n\n      if (resetPasswordResponse) {\n        if (!resetPasswordResponse.error) {\n          yield put({\n            type: RESET_USER_PASSWORD_SUCCESS,\n          });\n        } else {\n          const error =\n            (resetPasswordResponse.error.data &&\n              resetPasswordResponse.error.data.length > 0 &&\n              resetPasswordResponse.error.data[0].message) ||\n            resetPasswordResponse.error.message;\n          yield put({\n            type: RESET_USER_PASSWORD_ERROR,\n            error,\n          });\n        }\n      } else {\n        yield put({\n          type: RESET_USER_PASSWORD_ERROR,\n          error: 'No response from server',\n        });\n      }\n    } catch (error) {\n      yield put({\n        type: RESET_USER_PASSWORD_ERROR,\n        error: error && error.toString(),\n      });\n    }\n  } else {\n    yield put({\n      type: RESET_USER_PASSWORD_ERROR,\n      error: 'Invalid object',\n    });\n  }\n}\n\n// userId\n// existingPassword\n// newPassword\nfunction* changePasswordSaga(action) {\n  if (\n    !action ||\n    !action.userId ||\n    !action.currentPassword ||\n    !action.newPassword\n  ) {\n    yield put({\n      type: CHANGE_USER_PASSWORD_ERROR,\n      error: 'Invalid action object sent to changePassword saga',\n    });\n    return;\n  }\n\n  try {\n    const changePasswordObject = {\n      userId: action.userId,\n      existing: action.currentPassword,\n      new: action.newPassword,\n    };\n\n    yield put({\n      type: CHANGE_USER_PASSWORD_SENDING,\n    });\n    const clientCredentials = yield select(selectClientCredentials, 'js');\n    const client = yield getManagementApiClient({ ...clientCredentials });\n\n    const [err, res] = yield to(\n      client.security.users.updatePassword(changePasswordObject)\n    );\n\n    if (err) {\n      const error =\n        (err?.data?.data?.length > 0 && err.data.data[0].message) ||\n        err?.data?.message;\n      yield put({\n        type: CHANGE_USER_PASSWORD_ERROR,\n        error,\n      });\n      return;\n    }\n\n    // // eslint-disable-next-line no-console\n    // console.log(changePasswordObject);\n    // // eslint-disable-next-line no-console\n    // console.log(userCredentialsObject);\n    yield put({\n      type: CHANGE_USER_PASSWORD_SUCCESS,\n    });\n  } catch (error) {\n    yield put({\n      type: CHANGE_USER_PASSWORD_ERROR,\n      error: error && error.toString(),\n    });\n  }\n}\n","import { loginSagas } from './login';\nimport { registerSagas } from './register';\nimport { resetPasswordSagas } from './resetPassword';\n\nexport const userSagas = [\n  ...loginSagas,\n  ...registerSagas,\n  ...resetPasswordSagas,\n];\n","// index.js\nimport { all } from 'redux-saga/effects';\nimport { navigationSagas } from './navigation';\nimport { routingSagas } from '~/routing/redux/sagas';\nimport { userSagas } from '~/user/redux/sagas';\n\nexport default function (featureSagas = []) {\n  return function* rootSaga() {\n    const subSagas = [...routingSagas, ...navigationSagas, ...userSagas];\n    yield all([...subSagas, ...featureSagas]);\n  };\n}\n","const servers = SERVERS; /* global SERVERS */\nconst alias = servers.alias.toLowerCase();\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\nconst projects = PROJECTS; /* global PROJECTS */\n\n// return a projectId via the request hostname\nconst pickProject = (hostname, query) => {\n  // if localhost we can only infer via a querystring, and take your word for it\n  if (hostname == 'localhost') {\n    return (query && query.p) || projects[0].id;\n  }\n\n  // if hostname is the actual public uri we can return the first project from the list\n  if (hostname == publicUri) {\n    return projects[0].id;\n  }\n\n  let project = 'unknown';\n\n  // // go through all the defined projects\n  // Object.entries(projects).map(([, p]) => {\n  const p = projects[0];\n\n  // check if we're accessing via the project's public uri\n  if (hostname.includes(p.publicUri)) project = p.id;\n\n  // the url structure is different for website (we don't prefix)\n  if (p.id.startsWith('website')) {\n    // check for internal and external hostnames\n    // we check live and preview distinctly so our rule does not clash with\n    // hostnames that use a project prefix\n    if (\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`preview.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  } else {\n    // check for internal and external hostnames, prefixed with the projectId\n    if (\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  }\n  // });\n  return project === 'unknown' ? p.id : project;\n};\n\nexport default pickProject;\n","import React from 'react';\nimport { AppRootProps } from '../routing/routes';\nimport { RouteLoader } from '../routing';\n\nconst AppRoot = (props: AppRootProps) => {\n  return <RouteLoader {...props} />;\n};\n\nexport default AppRoot;\n"],"names":["selectedHistory","window","createBrowserHistory","createMemoryHistory","history","options","browserHistory","navigationSagas","takeEvery","GET_NODE_TREE","ensureNodeTreeSaga","action","state","select","hasNavigationTree","deliveryApiVersionStatus","selectVersionStatus","project","selectCurrentProject","nodes","deliveryApi","getClient","getRoot","depth","treeDepth","language","put","type","SET_NODE_TREE","GET_NODE_TREE_ERROR","ex","log","error","toString","sys","contentTypeId","dataFormat","filename","id","includeInSearch","slug","uri","versionStatus","Fields","entryTitle","entryDescription","keywords","wildcard","fieldExpression","field","value","operator","weight","Array","isArray","equalToOrIn","Op","defaultExpressions","equalTo","arr","length","in","routeEntryByFieldsQuery","fields","query","Query","routingSagas","SET_NAVIGATION_PATH","getRouteSaga","SET_ROUTE","setRouteSaga","payload","method","args","path","entry","withEvents","routes","ContentTypeMappings","staticRoute","cookies","api","cachedSearchWithCookies","raw","route","injectRedux","call","reduxInjectorSaga","pathNode","ancestors","children","siblings","contentTypeMapping","appsays","requireLogin","onRouteLoad","staticRouteLinkDepth","params","linkDepth","staticRouteFields","entryLinkDepth","undefined","setContentTypeLimits","find","ct","nodeOptions","routeEntry","selectRouteEntry","routeNode","selectCurrentNode","currentPath","deliveryApiStatus","isPreview","startsWith","defaultLang","customRouting","fetchNode","statePath","refetchNode","UPDATE_LOADING_STATE","isLoading","setRouteEntry","selectCurrentAncestors","selectCurrentSiblings","splitPath","split","entryGuid","previewEntry","entries","get","nodeError","to","getNode","entryFields","includes","status","userLoggedIn","handleRequiresLoginSaga","LoginHelper","GetAccessDeniedRoute","do500","findContentTypeMapping","search","items","resolveCurrentNodeOrdinates","resolvedContentTypeMapping","onRouteLoaded","preventScrollTop","scrollTo","entryMapper","do404","e","stack","apiCall","doNavigation","customNavigation","getAncestors","info","childrenDepth","childrenOptions","getChildren","getSiblings","includeInMenu","isTreeLoaded","tree","getNodeTree","loadAncestors","loadChildren","loadSiblings","loadTree","nodeWithChildren","all","node","notFound","remapEntry","entrySys","ContensisEntryId","currentEntryId","selectRouteEntryEntryId","currentEntryLang","selectRouteEntryLanguage","mappedEntry","selectMappedEntry","mapRouteEntry","SET_ENTRY","SET_ANCESTORS","SET_SIBLINGS","clientReloadHitServer","stateEntry","location","reload","isError","statusCode","injectorFn","key","reducer","saga","reduxInjector","registerSagas","REGISTER_USER","registerSaga","REGISTER_USER_SUCCESS","redirectSaga","user","mappers","requestBody","request","response","fetch","headers","Accept","body","JSON","stringify","ok","mappedResponse","responseBody","json","REGISTER_USER_FAILED","message","errorResponse","statusText","currentQs","queryParams","selectCurrentSearch","redirectUri","redirect_uri","redirect","setRoute","PAP_URL","USER_ENVS_URI","USER_RESEND_VERIFICATION_URI","USER_REQUEST_PASSWORD_RESET_URI","USER_RESET_PASSWORD_URI","USER_ENVS_URL","BASE_OPTIONS","UserHelper","GetUsersEnvironments","securityToken","ResendUserVerification","userEmail","RequestPasswordReset","userEmailObject","ResetPassword","resetPasswordObject","url","err","then","data","catch","resetPasswordSagas","REQUEST_USER_PASSWORD_RESET","requestPasswordResetSaga","RESET_USER_PASSWORD","resetPasswordSaga","CHANGE_USER_PASSWORD","changePasswordSaga","REQUEST_USER_PASSWORD_RESET_SENDING","passwordResetRequestResponse","REQUEST_USER_PASSWORD_RESET_SUCCESS","REQUEST_USER_PASSWORD_RESET_ERROR","RESET_USER_PASSWORD_SENDING","token","password","resetPasswordResponse","RESET_USER_PASSWORD_SUCCESS","RESET_USER_PASSWORD_ERROR","userId","currentPassword","newPassword","CHANGE_USER_PASSWORD_ERROR","changePasswordObject","existing","new","CHANGE_USER_PASSWORD_SENDING","clientCredentials","selectClientCredentials","client","getManagementApiClient","res","security","users","updatePassword","CHANGE_USER_PASSWORD_SUCCESS","userSagas","loginSagas","featureSagas","rootSaga","subSagas","servers","SERVERS","alias","toLowerCase","publicUri","PUBLIC_URI","projects","PROJECTS","pickProject","hostname","p","AppRoot","props"],"mappings":"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"}