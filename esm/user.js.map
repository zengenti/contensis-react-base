{"version":3,"file":"user.js","sources":["../src/user/hocs/withLogin.tsx","../src/user/hocs/withRegistration.js"],"sourcesContent":["import React from 'react';\nimport { useCookies } from 'react-cookie';\nimport { connect } from 'react-redux';\nimport { loginUser, logoutUser } from '../redux/actions';\nimport {\n  selectUser,\n  selectUserErrorMessage,\n  selectUserIsAuthenticationError,\n  selectUserIsError,\n  selectUserIsAuthenticated,\n  selectUserIsLoading,\n} from '../redux/selectors';\nimport { CookieHelper } from '../util/CookieHelper.class';\nimport { toJS } from '~/util/ToJs';\nimport { AppState } from '~/models';\n\nconst getDisplayName = (WrappedComponent: React.ComponentType) => {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nconst withLogin = (WrappedComponent: React.ComponentType) => {\n  const mapStateToProps = (state: AppState) => {\n    return {\n      errorMessage: selectUserErrorMessage(state),\n      isAuthenticated: selectUserIsAuthenticated(state),\n      isAuthenticationError: selectUserIsAuthenticationError(state),\n      isError: selectUserIsError(state),\n      isLoading: selectUserIsLoading(state),\n      user: selectUser(state),\n      // DEPRECATED: authenticationError is deprecated use isAuthenticationError instead\n      authenticationError: selectUserIsAuthenticationError(state),\n      // DEPRECATED: error is deprecated use isError instead\n      error: selectUserIsError(state),\n    };\n  };\n\n  const ConnectedComponent = () => {\n    const cookies = new CookieHelper(...useCookies());\n\n    const mapDispatchToProps = {\n      loginUser: (username: string, password: string) =>\n        loginUser(username, password, cookies),\n      logoutUser: (redirectPath?: string) => logoutUser(redirectPath, cookies),\n    };\n\n    const FinalComponent = connect(\n      mapStateToProps,\n      mapDispatchToProps\n    )(toJS(WrappedComponent));\n\n    return <FinalComponent />;\n  };\n\n  ConnectedComponent.displayName = `${getDisplayName(WrappedComponent)}`;\n  ConnectedComponent.WrappedComponent = WrappedComponent;\n\n  return ConnectedComponent;\n};\n\nexport default withLogin;\n","import { connect } from 'react-redux';\nimport { registerUser } from '../redux/actions';\nimport {\n  selectUserRegistration,\n  selectUserRegistrationError,\n  selectUserRegistrationIsLoading,\n  selectUserRegistrationIsSuccess,\n} from '../redux/selectors';\nimport { toJS } from '~/util/ToJs';\n\nconst getDisplayName = WrappedComponent => {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nconst withRegistration = WrappedComponent => {\n  const mapStateToProps = state => {\n    return {\n      error: selectUserRegistrationError(state),\n      isLoading: selectUserRegistrationIsLoading(state),\n      isSuccess: selectUserRegistrationIsSuccess(state),\n      user: selectUserRegistration(state),\n    };\n  };\n\n  const mapDispatchToProps = {\n    registerUser,\n  };\n\n  const ConnectedComponent = connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(toJS(WrappedComponent));\n\n  ConnectedComponent.displayName = `${getDisplayName(WrappedComponent)}`;\n\n  return ConnectedComponent;\n};\n\nexport default withRegistration;\n"],"names":["getDisplayName","WrappedComponent","displayName","name","withLogin","mapStateToProps","state","errorMessage","selectUserErrorMessage","isAuthenticated","selectUserIsAuthenticated","isAuthenticationError","selectUserIsAuthenticationError","isError","selectUserIsError","isLoading","selectUserIsLoading","user","selectUser","authenticationError","error","ConnectedComponent","cookies","CookieHelper","useCookies","mapDispatchToProps","loginUser","username","password","logoutUser","redirectPath","FinalComponent","connect","toJS","React","createElement","withRegistration","selectUserRegistrationError","selectUserRegistrationIsLoading","isSuccess","selectUserRegistrationIsSuccess","selectUserRegistration","registerUser"],"mappings":";;;;;;;;;;;;;;;AAgBA,MAAMA,gBAAc,GAAIC,gBAAqC,IAAK;EAChE,OAAOA,gBAAgB,CAACC,WAAW,IAAID,gBAAgB,CAACE,IAAI,IAAI,WAAW,CAAA;AAC7E,CAAC,CAAA;AAEKC,MAAAA,SAAS,GAAIH,gBAAqC,IAAK;EAC3D,MAAMI,eAAe,GAAIC,KAAe,IAAK;IAC3C,OAAO;AACLC,MAAAA,YAAY,EAAEC,sBAAsB,CAACF,KAAK,CAAC;AAC3CG,MAAAA,eAAe,EAAEC,yBAAyB,CAACJ,KAAK,CAAC;AACjDK,MAAAA,qBAAqB,EAAEC,+BAA+B,CAACN,KAAK,CAAC;AAC7DO,MAAAA,OAAO,EAAEC,iBAAiB,CAACR,KAAK,CAAC;AACjCS,MAAAA,SAAS,EAAEC,mBAAmB,CAACV,KAAK,CAAC;AACrCW,MAAAA,IAAI,EAAEC,UAAU,CAACZ,KAAK,CAAC;AACvB;AACAa,MAAAA,mBAAmB,EAAEP,+BAA+B,CAACN,KAAK,CAAC;AAC3D;MACAc,KAAK,EAAEN,iBAAiB,CAACR,KAAK,CAAA;KAC/B,CAAA;GACF,CAAA;EAED,MAAMe,kBAAkB,GAAGA,MAAM;IAC/B,MAAMC,OAAO,GAAG,IAAIC,YAAY,CAAC,GAAGC,UAAU,EAAE,CAAC,CAAA;AAEjD,IAAA,MAAMC,kBAAkB,GAAG;AACzBC,MAAAA,SAAS,EAAEA,CAACC,QAAgB,EAAEC,QAAgB,KAC5CF,SAAS,CAACC,QAAQ,EAAEC,QAAQ,EAAEN,OAAO,CAAC;AACxCO,MAAAA,UAAU,EAAGC,YAAqB,IAAKD,UAAU,CAACC,YAAY,EAAER,OAAO,CAAA;KACxE,CAAA;AAED,IAAA,MAAMS,cAAc,GAAGC,OAAO,CAC5B3B,eAAe,EACfoB,kBAAkB,CACnB,CAACQ,IAAI,CAAChC,gBAAgB,CAAC,CAAC,CAAA;AAEzB,IAAA,oBAAOiC,KAAA,CAAAC,aAAA,CAACJ,cAAc,EAAG,IAAA,CAAA,CAAA;GAC1B,CAAA;EAEDV,kBAAkB,CAACnB,WAAW,GAAI,CAAA,EAAEF,gBAAc,CAACC,gBAAgB,CAAE,CAAC,CAAA,CAAA;EACtEoB,kBAAkB,CAACpB,gBAAgB,GAAGA,gBAAgB,CAAA;AAEtD,EAAA,OAAOoB,kBAAkB,CAAA;AAC3B;;AC/CA,MAAMrB,cAAc,GAAGC,gBAAgB,IAAI;EACzC,OAAOA,gBAAgB,CAACC,WAAW,IAAID,gBAAgB,CAACE,IAAI,IAAI,WAAW,CAAA;AAC7E,CAAC,CAAA;AAEKiC,MAAAA,gBAAgB,GAAGnC,gBAAgB,IAAI;EAC3C,MAAMI,eAAe,GAAGC,KAAK,IAAI;IAC/B,OAAO;AACLc,MAAAA,KAAK,EAAEiB,2BAA2B,CAAC/B,KAAK,CAAC;AACzCS,MAAAA,SAAS,EAAEuB,+BAA+B,CAAChC,KAAK,CAAC;AACjDiC,MAAAA,SAAS,EAAEC,+BAA+B,CAAClC,KAAK,CAAC;MACjDW,IAAI,EAAEwB,sBAAsB,CAACnC,KAAK,CAAA;KACnC,CAAA;GACF,CAAA;AAED,EAAA,MAAMmB,kBAAkB,GAAG;AACzBiB,IAAAA,YAAAA;GACD,CAAA;AAED,EAAA,MAAMrB,kBAAkB,GAAGW,OAAO,CAChC3B,eAAe,EACfoB,kBAAkB,CACnB,CAACQ,IAAI,CAAChC,gBAAgB,CAAC,CAAC,CAAA;EAEzBoB,kBAAkB,CAACnB,WAAW,GAAI,CAAA,EAAEF,cAAc,CAACC,gBAAgB,CAAE,CAAC,CAAA,CAAA;AAEtE,EAAA,OAAOoB,kBAAkB,CAAA;AAC3B;;;;"}