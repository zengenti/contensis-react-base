{"version":3,"file":"version-5ce7dbce.js","sources":["../src/redux/selectors/navigation.js","../src/redux/store/injectors.js","../src/redux/actions/version.js"],"sourcesContent":["import { getImmutableOrJS as getIn } from '~/redux/util';\n\nexport const hasNavigationTree = state =>\n  getIn(state, ['navigation', 'isReady']);\n\nexport const selectNavigationRoot = state =>\n  getIn(state, ['navigation', 'root']);\n\nexport const selectNavigationChildren = state =>\n  getIn(state, ['navigation', 'root', 'children']);\n\nexport const selectNavigationDepends = () => [];\n","import { all } from 'redux-saga/effects';\nimport { reduxStore as DefaultStore } from './store';\n\nexport const convertSagaArray = sagas => {\n  if (Array.isArray(sagas))\n    return function* rootSaga() {\n      yield all(sagas);\n    };\n  return sagas;\n};\n\nexport const injectReducer = ({ key, reducer }, store = DefaultStore) => {\n  if (\n    Reflect.has(store.injectedReducers, key) &&\n    store.injectedReducers[key] === reducer\n  )\n    return;\n  store.injectedReducers[key] = reducer;\n\n  store.replaceReducer(store.createReducer(store.injectedReducers));\n};\n\nexport const injectSaga = ({ key, saga }, store = DefaultStore) => {\n  const rootSaga = convertSagaArray(saga);\n  let hasSaga = Reflect.has(store.injectedSagas, key);\n\n  if (process.env.NODE_ENV !== 'production') {\n    const oldDescriptor = store.injectedSagas[key]; // enable hot reloading of daemon and once-till-unmount sagas\n\n    if (hasSaga && oldDescriptor.saga !== rootSaga) {\n      oldDescriptor.task.cancel();\n      hasSaga = false;\n    }\n  }\n  console.info('injectSaga, key: ', key, 'hasSaga: ', hasSaga);\n\n  if (!hasSaga) {\n    store.injectedSagas[key] = {\n      key,\n      saga: rootSaga,\n      task: store.runSaga(rootSaga),\n    };\n  }\n};\n\nexport const injectRedux = ({ key, reducer, saga }, store = DefaultStore) => {\n  console.info('injectRedux, key: ', key);\n  if (reducer) injectReducer({ key, reducer }, store);\n  if (saga) injectSaga({ key, saga }, store);\n};\n\nexport const useInjectRedux = injectRedux;\n","import { action } from '../util';\nimport { SET_VERSION, SET_VERSION_STATUS } from '../types/version';\n\nexport const setVersion = (commitRef, buildNo) =>\n  action(SET_VERSION, { commitRef, buildNo });\n\nexport const setVersionStatus = status =>\n  action(SET_VERSION_STATUS, { status });\n"],"names":["hasNavigationTree","state","getIn","selectNavigationRoot","selectNavigationChildren","selectNavigationDepends","convertSagaArray","sagas","Array","isArray","rootSaga","all","injectReducer","key","reducer","store","DefaultStore","Reflect","has","injectedReducers","replaceReducer","createReducer","injectSaga","saga","hasSaga","injectedSagas","process","env","NODE_ENV","oldDescriptor","task","cancel","console","info","runSaga","injectRedux","useInjectRedux","setVersion","commitRef","buildNo","action","SET_VERSION","setVersionStatus","status","SET_VERSION_STATUS"],"mappings":"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"}